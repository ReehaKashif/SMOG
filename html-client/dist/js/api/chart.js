// let leftChartCtx = document.getElementById("chartLeftCanva").getContext("2d");
// let rightChartCtx = document.getElementById("chartRightCanva").getContext("2d");
let predictionChartCtx = document
.getElementById("predictionChart")
.getContext("2d");
let greeneryChartCtx = document.getElementById("greeneryChart").getContext("2d");

let leftChart, rightChart, predictionChart, greeneryChart;

$(document).ready(function () {
  // Initial function call when the page loads
  handleHistoricalParamsChange();
  handleForecastDistrictChange();
  handleSmogCausesDistrictChange();

  // Attach event listeners to select inputs
  $("#district-selector").change(function () {
    handleHistoricalParamsChange();
    handleForecastDistrictChange();
  });

  $("#duration-selector").change(function () {
    handleHistoricalParamsChange();
    handleForecastDistrictChange();
  });

  $("#predition-district-selector").change(function () {
    handleSmogCausesDistrictChange();
  });
  
  $("#greenery-district-selector").change(function () {
    handleGreeneryDistrictChange();
  });
});

const getHistoricalData = (district) => {
  return fetch(`${SERVER_URL}/historical_data?district=${district}`)
    .then((response) => {
      if (!response.ok) {
        throw new Error("Network response was not ok");
      }
      return response.json();
    })
    .then((data) => {
      return plotHistoricalGraph(data);
    })
    .catch((err) => {
      console.error("Fetch error:", { err });
      return null;
    });
};

const getForecastAqi = (district) => {
  return fetch(`${SERVER_URL}/forecast_data?district=${district}`)
    .then((response) => {
      if (!response.ok) {
        throw new Error("Network response was not ok");
      }
      return response.json();
    })
    .then((data) => {
      plotPredictionGraph(data);
      return;
    })
    .catch((err) => {
      console.error("Fetch error:", err);
      return null;
    });
};

const getPredictionData = (district) => {
  const lastYearPromise = fetch(`${SERVER_URL}/last_year?district=${district}`);
  const thisYearPromise = fetch(`${SERVER_URL}/this_year?district=${district}`);
  // const thisYearPromise = fetch(`${SERVER_URL}/this_year?district=${district}`);

  return Promise.all([lastYearPromise, thisYearPromise])
    .then(([lastYearResponse, thisYearResponse]) => {
      if (!lastYearResponse.ok || !thisYearResponse.ok) {
        throw new Error("Network response was not ok");
      }
      return Promise.all([lastYearResponse.json(), thisYearResponse.json()]);
    })
    .then(([lastYearData, thisYearData]) => {
      plotSmogCausesChart({ ...lastYearData, ...thisYearData });
      return;
    })
    .catch((err) => {
      console.error("Fetch error:", err);
      return null;
    });
};

const getGreeneryData = (district) => {
  const data = {
  'Attock': {'Jan - Mar, 2016': 31.43638155, 'Apr - Jun, 2016': 4.038132296, 'Jul - Sep, 2016': 26.8825896, 'Oct - Dec, 2016': 3.11817384, 'Jan - Mar, 2017': 19.8035856, 'Apr - Jun, 2017': 3.060655468, 'Jul - Sep, 2017': 38.37758269, 'Oct - Dec, 2017': 6.995746239, 'Jan - Mar, 2018': 34.29198866, 'Apr - Jun, 2018': 4.336691178, 'Jul - Sep, 2018': 38.58273067, 'Oct - Dec, 2018': 13.85848902, 'Jan - Mar, 2019': 39.44457268, 'Apr - Jun, 2019': 11.09730338, 'Jul - Sep, 2019': 38.07704695, 'Oct - Dec, 2019': 28.37189263, 'Jan - Mar, 2020': 34.81336731, 'Apr - Jun, 2020': 20.3312415, 'Jul - Sep, 2020': 50.51324411, 'Oct - Dec, 2020': 17.83978226, 'Jan - Mar, 2021': 29.67370211, 'Apr - Jun, 2021': 2.92044754, 'Jul - Sep, 2021': 21.77210548, 'Oct - Dec, 2021': 8.340910193, 'Jan - Mar, 2022': 13.71982924, 'Apr - Jun, 2022': 0.078240344, 'Jul - Sep, 2022': 7.818732475, 'Oct - Dec, 2022': 2.101909243, 'Jan - Mar, 2023': 12.01916876, 'Apr - Jun, 2023': 0.599696636, 'Jul - Sep, 2023': 4.888803833, 'Oct - Dec, 2023': 1.154350081, 'Jan - Mar, 2024': 13.31411382, 'Apr - Jun, 2024': 0.635897632, 'Jul - Sep, 2024': 11.49220169, 'Oct - Dec, 2024': null},
  'Bahawalnagar': {'Jan - Mar, 2016': 61.50829213, 'Apr - Jun, 2016': 2.42356362, 'Jul - Sep, 2016': 53.79895428, 'Oct - Dec, 2016': 5.753784797, 'Jan - Mar, 2017': 60.97617524, 'Apr - Jun, 2017': 2.628418612, 'Jul - Sep, 2017': 54.28459688, 'Oct - Dec, 2017': 7.46012221, 'Jan - Mar, 2018': 61.16281243, 'Apr - Jun, 2018': 0.752667272, 'Jul - Sep, 2018': 48.47279279, 'Oct - Dec, 2018': 15.78765365, 'Jan - Mar, 2019': 61.35239252, 'Apr - Jun, 2019': 6.299310357, 'Jul - Sep, 2019': 53.64415814, 'Oct - Dec, 2019': 15.31900005, 'Jan - Mar, 2020': 65.08555134, 'Apr - Jun, 2020': 6.532328876, 'Jul - Sep, 2020': 56.82507115, 'Oct - Dec, 2020': 7.189360893, 'Jan - Mar, 2021': 64.85352916, 'Apr - Jun, 2021': 7.216282466, 'Jul - Sep, 2021': 50.35827031, 'Oct - Dec, 2021': 8.337781546, 'Jan - Mar, 2022': 53.26454822, 'Apr - Jun, 2022': 0.135321292, 'Jul - Sep, 2022': 29.43580294, 'Oct - Dec, 2022': 6.457947427, 'Jan - Mar, 2023': 46.69752952, 'Apr - Jun, 2023': 1.698064838, 'Jul - Sep, 2023': 31.60601122, 'Oct - Dec, 2023': 0.253726706, 'Jan - Mar, 2024': 56.06817667, 'Apr - Jun, 2024': 0.613318701, 'Jul - Sep, 2024': 36.82814026, 'Oct - Dec, 2024': null},
  'Bahawalpur': {'Jan - Mar, 2016': 19.53111891, 'Apr - Jun, 2016': 1.917215982, 'Jul - Sep, 2016': 17.38830108, 'Oct - Dec, 2016': 3.816053135, 'Jan - Mar, 2017': 18.85076049, 'Apr - Jun, 2017': 2.441791784, 'Jul - Sep, 2017': 18.13398056, 'Oct - Dec, 2017': 4.477779825, 'Jan - Mar, 2018': 19.09879049, 'Apr - Jun, 2018': 0.667746716, 'Jul - Sep, 2018': 16.2364919, 'Oct - Dec, 2018': 5.379614782, 'Jan - Mar, 2019': 19.36832872, 'Apr - Jun, 2019': 2.825733159, 'Jul - Sep, 2019': 17.48801788, 'Oct - Dec, 2019': 6.03669092, 'Jan - Mar, 2020': 20.08401743, 'Apr - Jun, 2020': 3.772457459, 'Jul - Sep, 2020': 18.1847898, 'Oct - Dec, 2020': 3.808474263, 'Jan - Mar, 2021': 20.22593743, 'Apr - Jun, 2021': 3.507357882, 'Jul - Sep, 2021': 16.13668038, 'Oct - Dec, 2021': 3.543973334, 'Jan - Mar, 2022': 15.98104453, 'Apr - Jun, 2022': 0.129845908, 'Jul - Sep, 2022': 8.652739052, 'Oct - Dec, 2022': 3.251111504, 'Jan - Mar, 2023': 11.7048794, 'Apr - Jun, 2023': 0.955254192, 'Jul - Sep, 2023': 8.109532534, 'Oct - Dec, 2023': 0.155164062, 'Jan - Mar, 2024': 18.3167912, 'Apr - Jun, 2024': 0.553309222, 'Jul - Sep, 2024': 13.60718558, 'Oct - Dec, 2024': null},
  'Bhakar': {'Jan - Mar, 2016': 31.64524211, 'Apr - Jun, 2016': 6.727520789, 'Jul - Sep, 2016': 19.57708637, 'Oct - Dec, 2016': 5.267220638, 'Jan - Mar, 2017': 34.67451967, 'Apr - Jun, 2017': 3.33328973, 'Jul - Sep, 2017': 13.66137301, 'Oct - Dec, 2017': 11.5158841, 'Jan - Mar, 2018': 34.52829505, 'Apr - Jun, 2018': 2.689117649, 'Jul - Sep, 2018': 7.764804823, 'Oct - Dec, 2018': 10.02470517, 'Jan - Mar, 2019': 47.20921563, 'Apr - Jun, 2019': 6.796558246, 'Jul - Sep, 2019': 16.96993765, 'Oct - Dec, 2019': 15.54142615, 'Jan - Mar, 2020': 52.32750882, 'Apr - Jun, 2020': 7.81087714, 'Jul - Sep, 2020': 16.31751696, 'Oct - Dec, 2020': 12.20707882, 'Jan - Mar, 2021': 32.36451856, 'Apr - Jun, 2021': 5.375791942, 'Jul - Sep, 2021': 12.31973437, 'Oct - Dec, 2021': 7.8279749, 'Jan - Mar, 2022': 20.07935199, 'Apr - Jun, 2022': 0.157931278, 'Jul - Sep, 2022': 5.083413954, 'Oct - Dec, 2022': 3.04506655, 'Jan - Mar, 2023': 24.59234904, 'Apr - Jun, 2023': 1.535811872, 'Jul - Sep, 2023': 4.720606967, 'Oct - Dec, 2023': 1.307347214, 'Jan - Mar, 2024': 24.50536358, 'Apr - Jun, 2024': 0.99847527, 'Jul - Sep, 2024': 6.782526732, 'Oct - Dec, 2024': null},
  'Chakwal': {'Jan - Mar, 2016': 28.32218469, 'Apr - Jun, 2016': 2.437609609, 'Jul - Sep, 2016': 36.09409487, 'Oct - Dec, 2016': 6.266861362, 'Jan - Mar, 2017': 15.93714655, 'Apr - Jun, 2017': 2.296559565, 'Jul - Sep, 2017': 45.66697702, 'Oct - Dec, 2017': 6.849971377, 'Jan - Mar, 2018': 26.27954237, 'Apr - Jun, 2018': 2.829838671, 'Jul - Sep, 2018': 37.60672407, 'Oct - Dec, 2018': 6.4506659, 'Jan - Mar, 2019': 25.11204573, 'Apr - Jun, 2019': 3.059545727, 'Jul - Sep, 2019': 38.97569244, 'Oct - Dec, 2019': 9.120917068, 'Jan - Mar, 2020': 20.67962206, 'Apr - Jun, 2020': 3.640783142, 'Jul - Sep, 2020': 44.8014709, 'Oct - Dec, 2020': 5.407476221, 'Jan - Mar, 2021': 14.17655188, 'Apr - Jun, 2021': 1.77781012, 'Jul - Sep, 2021': 34.56903141, 'Oct - Dec, 2021': 7.946305522, 'Jan - Mar, 2022': 14.21048249, 'Apr - Jun, 2022': 0.028134307, 'Jul - Sep, 2022': 32.47041135, 'Oct - Dec, 2022': 5.351601105, 'Jan - Mar, 2023': 15.1416884, 'Apr - Jun, 2023': 0.712106406, 'Jul - Sep, 2023': 35.80329063, 'Oct - Dec, 2023': 3.241098569, 'Jan - Mar, 2024': 20.70907936, 'Apr - Jun, 2024': 0.332883895, 'Jul - Sep, 2024': 32.4103648, 'Oct - Dec, 2024': null},
  'Chiniot': {'Jan - Mar, 2016': 57.59340641, 'Apr - Jun, 2016': 16.92145031, 'Jul - Sep, 2016': 55.81496108, 'Oct - Dec, 2016': 31.82299212, 'Jan - Mar, 2017': 68.35167826, 'Apr - Jun, 2017': 20.43938771, 'Jul - Sep, 2017': 61.86556052, 'Oct - Dec, 2017': 36.75458217, 'Jan - Mar, 2018': 65.50551096, 'Apr - Jun, 2018': 13.95534532, 'Jul - Sep, 2018': 54.88507158, 'Oct - Dec, 2018': 39.20157706, 'Jan - Mar, 2019': 66.09023412, 'Apr - Jun, 2019': 30.80706704, 'Jul - Sep, 2019': 61.9400984, 'Oct - Dec, 2019': 44.16836591, 'Jan - Mar, 2020': 67.38604256, 'Apr - Jun, 2020': 40.25381561, 'Jul - Sep, 2020': 71.89985171, 'Oct - Dec, 2020': 40.96034718, 'Jan - Mar, 2021': 64.72817107, 'Apr - Jun, 2021': 29.86989608, 'Jul - Sep, 2021': 73.00832561, 'Oct - Dec, 2021': 29.79318441, 'Jan - Mar, 2022': 43.70895496, 'Apr - Jun, 2022': 1.135679306, 'Jul - Sep, 2022': 43.84670088, 'Oct - Dec, 2022': 24.18717654, 'Jan - Mar, 2023': 46.14229837, 'Apr - Jun, 2023': 9.779963856, 'Jul - Sep, 2023': 34.82923104, 'Oct - Dec, 2023': 4.045384559, 'Jan - Mar, 2024': 48.59920177, 'Apr - Jun, 2024': 4.6470419, 'Jul - Sep, 2024': 44.27455814, 'Oct - Dec, 2024': null},
  'D G Khan': {'Jan - Mar, 2016': 24.69235716, 'Apr - Jun, 2016': 0.488709912, 'Jul - Sep, 2016': 18.15772817, 'Oct - Dec, 2016': 9.234673152, 'Jan - Mar, 2017': 28.01537762, 'Apr - Jun, 2017': 1.461951136, 'Jul - Sep, 2017': 17.69028229, 'Oct - Dec, 2017': 9.235800918, 'Jan - Mar, 2018': 28.65321889, 'Apr - Jun, 2018': 0.940124496, 'Jul - Sep, 2018': 14.55941194, 'Oct - Dec, 2018': 5.457207578, 'Jan - Mar, 2019': 29.86850993, 'Apr - Jun, 2019': 2.826872037, 'Jul - Sep, 2019': 24.17772295, 'Oct - Dec, 2019': 10.58134926, 'Jan - Mar, 2020': 30.11206018, 'Apr - Jun, 2020': 5.628685158, 'Jul - Sep, 2020': 22.04514709, 'Oct - Dec, 2020': 8.600968237, 'Jan - Mar, 2021': 28.98785451, 'Apr - Jun, 2021': 2.236721164, 'Jul - Sep, 2021': 17.34053233, 'Oct - Dec, 2021': 5.876664198, 'Jan - Mar, 2022': 20.39950469, 'Apr - Jun, 2022': 0.040872313, 'Jul - Sep, 2022': 7.860294242, 'Oct - Dec, 2022': 1.259025278, 'Jan - Mar, 2023': 21.4507105, 'Apr - Jun, 2023': 0.376820039, 'Jul - Sep, 2023': 7.034537169, 'Oct - Dec, 2023': 0.612265069, 'Jan - Mar, 2024': 25.27088019, 'Apr - Jun, 2024': 0.314153213, 'Jul - Sep, 2024': 9.524155753, 'Oct - Dec, 2024': null},
  'Faisalabad': {'Jan - Mar, 2016': 67.67055821, 'Apr - Jun, 2016': 14.02481181, 'Jul - Sep, 2016': 60.15238782, 'Oct - Dec, 2016': 26.59674086, 'Jan - Mar, 2017': 64.41554979, 'Apr - Jun, 2017': 14.93592767, 'Jul - Sep, 2017': 53.37113537, 'Oct - Dec, 2017': 28.8610358, 'Jan - Mar, 2018': 68.46011756, 'Apr - Jun, 2018': 5.621020921, 'Jul - Sep, 2018': 50.05715565, 'Oct - Dec, 2018': 33.13827825, 'Jan - Mar, 2019': 71.8169103, 'Apr - Jun, 2019': 24.71250514, 'Jul - Sep, 2019': 54.57958911, 'Oct - Dec, 2019': 40.61580713, 'Jan - Mar, 2020': 72.87623524, 'Apr - Jun, 2020': 30.59438191, 'Jul - Sep, 2020': 68.11000842, 'Oct - Dec, 2020': 28.86945288, 'Jan - Mar, 2021': 70.61957073, 'Apr - Jun, 2021': 20.87149827, 'Jul - Sep, 2021': 59.69576032, 'Oct - Dec, 2021': 27.60173089, 'Jan - Mar, 2022': 47.45049345, 'Apr - Jun, 2022': 0.476307856, 'Jul - Sep, 2022': 25.87732662, 'Oct - Dec, 2022': 18.3149265, 'Jan - Mar, 2023': 47.62995167, 'Apr - Jun, 2023': 4.137222648, 'Jul - Sep, 2023': 19.47838742, 'Oct - Dec, 2023': 1.567305715, 'Jan - Mar, 2024': 55.05717963, 'Apr - Jun, 2024': 1.127125168, 'Jul - Sep, 2024': 27.88496431, 'Oct - Dec, 2024': null},
  'Gujranwala': {'Jan - Mar, 2016': 83.17807652, 'Apr - Jun, 2016': 5.731825318, 'Jul - Sep, 2016': 83.86906916, 'Oct - Dec, 2016': 10.70570234, 'Jan - Mar, 2017': 85.13958909, 'Apr - Jun, 2017': 6.979862694, 'Jul - Sep, 2017': 85.05629085, 'Oct - Dec, 2017': 13.67943678, 'Jan - Mar, 2018': 82.85355156, 'Apr - Jun, 2018': 4.661437364, 'Jul - Sep, 2018': 86.18770682, 'Oct - Dec, 2018': 22.34680843, 'Jan - Mar, 2019': 85.51977305, 'Apr - Jun, 2019': 12.46272727, 'Jul - Sep, 2019': 85.99471817, 'Oct - Dec, 2019': 21.89642629, 'Jan - Mar, 2020': 83.60540801, 'Apr - Jun, 2020': 22.02939541, 'Jul - Sep, 2020': 85.69422459, 'Oct - Dec, 2020': 12.82977561, 'Jan - Mar, 2021': 81.60092541, 'Apr - Jun, 2021': 10.16634228, 'Jul - Sep, 2021': 84.8307342, 'Oct - Dec, 2021': 7.775443271, 'Jan - Mar, 2022': 71.85084631, 'Apr - Jun, 2022': 0.093201684, 'Jul - Sep, 2022': 65.72051915, 'Oct - Dec, 2022': 6.184945364, 'Jan - Mar, 2023': 72.80919881, 'Apr - Jun, 2023': 2.559316064, 'Jul - Sep, 2023': 69.02846441, 'Oct - Dec, 2023': 2.551253275, 'Jan - Mar, 2024': 73.60277136, 'Apr - Jun, 2024': 0.507343066, 'Jul - Sep, 2024': 69.02591469, 'Oct - Dec, 2024': null},
  'Gujrat': {'Jan - Mar, 2016': 58.88989723, 'Apr - Jun, 2016': 5.1387718, 'Jul - Sep, 2016': 63.21016553, 'Oct - Dec, 2016': 11.8878286, 'Jan - Mar, 2017': 56.23826968, 'Apr - Jun, 2017': 6.621365438, 'Jul - Sep, 2017': 63.67631324, 'Oct - Dec, 2017': 13.96063329, 'Jan - Mar, 2018': 61.43568122, 'Apr - Jun, 2018': 5.817785801, 'Jul - Sep, 2018': 68.5861911, 'Oct - Dec, 2018': 17.31778542, 'Jan - Mar, 2019': 66.16103777, 'Apr - Jun, 2019': 15.51534863, 'Jul - Sep, 2019': 77.43845557, 'Oct - Dec, 2019': 36.62705841, 'Jan - Mar, 2020': 66.95318709, 'Apr - Jun, 2020': 27.17375579, 'Jul - Sep, 2020': 68.40683192, 'Oct - Dec, 2020': 18.20140269, 'Jan - Mar, 2021': 65.97401767, 'Apr - Jun, 2021': 12.97373346, 'Jul - Sep, 2021': 65.35663445, 'Oct - Dec, 2021': 22.8090411, 'Jan - Mar, 2022': 40.58310053, 'Apr - Jun, 2022': 0.065005779, 'Jul - Sep, 2022': 34.49134455, 'Oct - Dec, 2022': 7.07176859, 'Jan - Mar, 2023': 40.0745524, 'Apr - Jun, 2023': 3.57861175, 'Jul - Sep, 2023': 27.24325941, 'Oct - Dec, 2023': 4.41104222, 'Jan - Mar, 2024': 38.38650218, 'Apr - Jun, 2024': 0.364326906, 'Jul - Sep, 2024': 41.09112663, 'Oct - Dec, 2024': null},
  'Hafizabad': {'Jan - Mar, 2016': 74.60237255, 'Apr - Jun, 2016': 3.249361682, 'Jul - Sep, 2016': 79.50449449, 'Oct - Dec, 2016': 13.77554374, 'Jan - Mar, 2017': 84.54881669, 'Apr - Jun, 2017': 3.482029571, 'Jul - Sep, 2017': 83.94156404, 'Oct - Dec, 2017': 14.85949864, 'Jan - Mar, 2018': 83.77304175, 'Apr - Jun, 2018': 2.597483226, 'Jul - Sep, 2018': 83.92877235, 'Oct - Dec, 2018': 16.0746833, 'Jan - Mar, 2019': 85.56255554, 'Apr - Jun, 2019': 10.40456486, 'Jul - Sep, 2019': 86.26708392, 'Oct - Dec, 2019': 17.42172112, 'Jan - Mar, 2020': 83.58920811, 'Apr - Jun, 2020': 14.27210547, 'Jul - Sep, 2020': 86.87947497, 'Oct - Dec, 2020': 13.53278015, 'Jan - Mar, 2021': 84.41294389, 'Apr - Jun, 2021': 6.266957103, 'Jul - Sep, 2021': 86.95252452, 'Oct - Dec, 2021': 8.93680298, 'Jan - Mar, 2022': 77.157964, 'Apr - Jun, 2022': 0.100255142, 'Jul - Sep, 2022': 68.4190542, 'Oct - Dec, 2022': 6.63171833, 'Jan - Mar, 2023': 79.05424942, 'Apr - Jun, 2023': 1.010350094, 'Jul - Sep, 2023': 64.67463505, 'Oct - Dec, 2023': 1.991145576, 'Jan - Mar, 2024': 79.48944697, 'Apr - Jun, 2024': 0.223716616, 'Jul - Sep, 2024': 69.3767522, 'Oct - Dec, 2024': null},
  'Jhang': {'Jan - Mar, 2016': 60.30736081, 'Apr - Jun, 2016': 10.28318307, 'Jul - Sep, 2016': 49.47327138, 'Oct - Dec, 2016': 20.70480003, 'Jan - Mar, 2017': 61.37211461, 'Apr - Jun, 2017': 9.67403056, 'Jul - Sep, 2017': 52.79588268, 'Oct - Dec, 2017': 22.90869996, 'Jan - Mar, 2018': 63.52661248, 'Apr - Jun, 2018': 5.637914388, 'Jul - Sep, 2018': 45.79630556, 'Oct - Dec, 2018': 24.21220023, 'Jan - Mar, 2019': 65.557375, 'Apr - Jun, 2019': 14.093528, 'Jul - Sep, 2019': 52.67594352, 'Oct - Dec, 2019': 28.31978089, 'Jan - Mar, 2020': 72.79234601, 'Apr - Jun, 2020': 17.63489481, 'Jul - Sep, 2020': 58.09441207, 'Oct - Dec, 2020': 22.16354645, 'Jan - Mar, 2021': 61.87814107, 'Apr - Jun, 2021': 13.23624018, 'Jul - Sep, 2021': 57.87770564, 'Oct - Dec, 2021': 17.71129507, 'Jan - Mar, 2022': 46.35158166, 'Apr - Jun, 2022': 0.580010894, 'Jul - Sep, 2022': 33.03214618, 'Oct - Dec, 2022': 9.629052826, 'Jan - Mar, 2023': 48.95644307, 'Apr - Jun, 2023': 2.138030864, 'Jul - Sep, 2023': 28.0074611, 'Oct - Dec, 2023': 0.394682312, 'Jan - Mar, 2024': 50.70632903, 'Apr - Jun, 2024': 2.180720189, 'Jul - Sep, 2024': 33.97369381, 'Oct - Dec, 2024': null},
  'Jhelum': {'Jan - Mar, 2016': 26.74032696, 'Apr - Jun, 2016': 2.462062017, 'Jul - Sep, 2016': 50.05259178, 'Oct - Dec, 2016': 6.645309909, 'Jan - Mar, 2017': 13.67828447, 'Apr - Jun, 2017': 2.961653269, 'Jul - Sep, 2017': 54.59979345, 'Oct - Dec, 2017': 5.984812234, 'Jan - Mar, 2018': 24.34073092, 'Apr - Jun, 2018': 2.613426376, 'Jul - Sep, 2018': 39.18501216, 'Oct - Dec, 2018': 11.41484425, 'Jan - Mar, 2019': 29.07524065, 'Apr - Jun, 2019': 10.22765463, 'Jul - Sep, 2019': 54.45536336, 'Oct - Dec, 2019': 27.25030864, 'Jan - Mar, 2020': 27.73007842, 'Apr - Jun, 2020': 23.80428489, 'Jul - Sep, 2020': 60.4976219, 'Oct - Dec, 2020': 14.82751167, 'Jan - Mar, 2021': 26.32617533, 'Apr - Jun, 2021': 4.007277873, 'Jul - Sep, 2021': 45.70942594, 'Oct - Dec, 2021': 20.98814885, 'Jan - Mar, 2022': 14.23499228, 'Apr - Jun, 2022': 0.111243518, 'Jul - Sep, 2022': 26.60338348, 'Oct - Dec, 2022': 2.754812215, 'Jan - Mar, 2023': 11.76350598, 'Apr - Jun, 2023': 1.765387886, 'Jul - Sep, 2023': 10.28661959, 'Oct - Dec, 2023': 2.615261876, 'Jan - Mar, 2024': 13.05384437, 'Apr - Jun, 2024': 0.556130071, 'Jul - Sep, 2024': 28.66094743, 'Oct - Dec, 2024': null},
  'Kasur': {'Jan - Mar, 2016': 61.61712069, 'Apr - Jun, 2016': 13.74706098, 'Jul - Sep, 2016': 70.04813903, 'Oct - Dec, 2016': 25.01986064, 'Jan - Mar, 2017': 66.43833624, 'Apr - Jun, 2017': 19.695763, 'Jul - Sep, 2017': 69.00839981, 'Oct - Dec, 2017': 34.78938534, 'Jan - Mar, 2018': 67.27925854, 'Apr - Jun, 2018': 17.46005713, 'Jul - Sep, 2018': 68.65483624, 'Oct - Dec, 2018': 36.9968656, 'Jan - Mar, 2019': 67.61951521, 'Apr - Jun, 2019': 33.08493273, 'Jul - Sep, 2019': 70.21734145, 'Oct - Dec, 2019': 41.6711641, 'Jan - Mar, 2020': 68.33805471, 'Apr - Jun, 2020': 38.24873248, 'Jul - Sep, 2020': 75.69841119, 'Oct - Dec, 2020': 38.23674132, 'Jan - Mar, 2021': 67.06492723, 'Apr - Jun, 2021': 29.05112339, 'Jul - Sep, 2021': 73.34366121, 'Oct - Dec, 2021': 32.88227487, 'Jan - Mar, 2022': 46.40764583, 'Apr - Jun, 2022': 1.095730598, 'Jul - Sep, 2022': 40.16949806, 'Oct - Dec, 2022': 19.63931229, 'Jan - Mar, 2023': 41.32723102, 'Apr - Jun, 2023': 17.17959402, 'Jul - Sep, 2023': 35.72070076, 'Oct - Dec, 2023': 8.643737601, 'Jan - Mar, 2024': 50.01647302, 'Apr - Jun, 2024': 11.12431126, 'Jul - Sep, 2024': 42.59265607, 'Oct - Dec, 2024': null},
  'Khanewal': {'Jan - Mar, 2016': 81.42589716, 'Apr - Jun, 2016': 11.875999, 'Jul - Sep, 2016': 72.52570729, 'Oct - Dec, 2016': 14.41361198, 'Jan - Mar, 2017': 80.38576638, 'Apr - Jun, 2017': 10.12011849, 'Jul - Sep, 2017': 75.54408973, 'Oct - Dec, 2017': 15.38308531, 'Jan - Mar, 2018': 81.94263479, 'Apr - Jun, 2018': 3.845574662, 'Jul - Sep, 2018': 72.40466243, 'Oct - Dec, 2018': 22.24548499, 'Jan - Mar, 2019': 80.9406003, 'Apr - Jun, 2019': 17.55176548, 'Jul - Sep, 2019': 75.44584976, 'Oct - Dec, 2019': 25.36063268, 'Jan - Mar, 2020': 79.91264803, 'Apr - Jun, 2020': 22.05637468, 'Jul - Sep, 2020': 75.37351466, 'Oct - Dec, 2020': 16.65112309, 'Jan - Mar, 2021': 79.33657514, 'Apr - Jun, 2021': 17.33071078, 'Jul - Sep, 2021': 68.36347674, 'Oct - Dec, 2021': 8.474332705, 'Jan - Mar, 2022': 62.33822755, 'Apr - Jun, 2022': 0.558353075, 'Jul - Sep, 2022': 27.8146676, 'Oct - Dec, 2022': 10.68790052, 'Jan - Mar, 2023': 56.04221869, 'Apr - Jun, 2023': 7.060630531, 'Jul - Sep, 2023': 29.77215779, 'Oct - Dec, 2023': 0.064530545, 'Jan - Mar, 2024': 64.17911747, 'Apr - Jun, 2024': 3.48191779, 'Jul - Sep, 2024': 36.35954505, 'Oct - Dec, 2024': null},
  'Khushab': {'Jan - Mar, 2016': 26.68322513, 'Apr - Jun, 2016': 3.20747315, 'Jul - Sep, 2016': 33.9025506, 'Oct - Dec, 2016': 10.06708631, 'Jan - Mar, 2017': 30.48719815, 'Apr - Jun, 2017': 2.427619096, 'Jul - Sep, 2017': 34.43616908, 'Oct - Dec, 2017': 12.56457494, 'Jan - Mar, 2018': 28.88371962, 'Apr - Jun, 2018': 1.596422953, 'Jul - Sep, 2018': 20.62593342, 'Oct - Dec, 2018': 15.69195354, 'Jan - Mar, 2019': 46.70935009, 'Apr - Jun, 2019': 8.556922676, 'Jul - Sep, 2019': 29.63602747, 'Oct - Dec, 2019': 24.57271385, 'Jan - Mar, 2020': 38.97749807, 'Apr - Jun, 2020': 13.11956428, 'Jul - Sep, 2020': 37.45909466, 'Oct - Dec, 2020': 22.25262248, 'Jan - Mar, 2021': 27.11755059, 'Apr - Jun, 2021': 4.70787697, 'Jul - Sep, 2021': 30.60145061, 'Oct - Dec, 2021': 11.76130949, 'Jan - Mar, 2022': 15.96851954, 'Apr - Jun, 2022': 0.058330187, 'Jul - Sep, 2022': 10.68774617, 'Oct - Dec, 2022': 4.494431553, 'Jan - Mar, 2023': 15.739348, 'Apr - Jun, 2023': 1.044271915, 'Jul - Sep, 2023': 3.428075456, 'Oct - Dec, 2023': 1.747287581, 'Jan - Mar, 2024': 15.96338389, 'Apr - Jun, 2024': 0.232106497, 'Jul - Sep, 2024': 9.47856088, 'Oct - Dec, 2024': null},
  'Lahore': {'Jan - Mar, 2016': 48.52802943, 'Apr - Jun, 2016': 6.764687045, 'Jul - Sep, 2016': 48.05614406, 'Oct - Dec, 2016': 11.39284145, 'Jan - Mar, 2017': 52.7357775, 'Apr - Jun, 2017': 11.49366401, 'Jul - Sep, 2017': 46.91143742, 'Oct - Dec, 2017': 18.60865423, 'Jan - Mar, 2018': 49.39087612, 'Apr - Jun, 2018': 8.043167993, 'Jul - Sep, 2018': 46.44231201, 'Oct - Dec, 2018': 21.81446689, 'Jan - Mar, 2019': 53.68819284, 'Apr - Jun, 2019': 19.55316352, 'Jul - Sep, 2019': 45.1862295, 'Oct - Dec, 2019': 26.17912216, 'Jan - Mar, 2020': 53.13882162, 'Apr - Jun, 2020': 21.45180426, 'Jul - Sep, 2020': 51.81006802, 'Oct - Dec, 2020': 21.47759682, 'Jan - Mar, 2021': 48.00973127, 'Apr - Jun, 2021': 16.5608029, 'Jul - Sep, 2021': 49.92690072, 'Oct - Dec, 2021': 13.97503291, 'Jan - Mar, 2022': 36.55910317, 'Apr - Jun, 2022': 0.207957444, 'Jul - Sep, 2022': 16.6378194, 'Oct - Dec, 2022': 6.3584225, 'Jan - Mar, 2023': 33.74332747, 'Apr - Jun, 2023': 3.877914442, 'Jul - Sep, 2023': 17.6605627, 'Oct - Dec, 2023': 3.23194398, 'Jan - Mar, 2024': 35.70499718, 'Apr - Jun, 2024': 1.418427711, 'Jul - Sep, 2024': 19.90345511, 'Oct - Dec, 2024': null},
  'Layyah': {'Jan - Mar, 2016': 49.98865236, 'Apr - Jun, 2016': 3.176398631, 'Jul - Sep, 2016': 31.81065525, 'Oct - Dec, 2016': 7.801591295, 'Jan - Mar, 2017': 50.02739497, 'Apr - Jun, 2017': 4.732078291, 'Jul - Sep, 2017': 30.74197675, 'Oct - Dec, 2017': 14.17244389, 'Jan - Mar, 2018': 52.92924839, 'Apr - Jun, 2018': 3.942707461, 'Jul - Sep, 2018': 21.56717498, 'Oct - Dec, 2018': 10.4850986, 'Jan - Mar, 2019': 53.53973282, 'Apr - Jun, 2019': 9.858392907, 'Jul - Sep, 2019': 34.96931852, 'Oct - Dec, 2019': 18.31273578, 'Jan - Mar, 2020': 64.74316997, 'Apr - Jun, 2020': 13.02081293, 'Jul - Sep, 2020': 30.12017709, 'Oct - Dec, 2020': 15.04176992, 'Jan - Mar, 2021': 49.85681014, 'Apr - Jun, 2021': 9.038247024, 'Jul - Sep, 2021': 27.54555239, 'Oct - Dec, 2021': 8.792703007, 'Jan - Mar, 2022': 35.36296862, 'Apr - Jun, 2022': 0.193859553, 'Jul - Sep, 2022': 10.20384234, 'Oct - Dec, 2022': 3.160911235, 'Jan - Mar, 2023': 38.88602517, 'Apr - Jun, 2023': 2.076973415, 'Jul - Sep, 2023': 8.335308416, 'Oct - Dec, 2023': 0.460508487, 'Jan - Mar, 2024': 41.48820035, 'Apr - Jun, 2024': 1.309254346, 'Jul - Sep, 2024': 11.8814901, 'Oct - Dec, 2024': null},
  'Lodhran': {'Jan - Mar, 2016': 82.90378929, 'Apr - Jun, 2016': 6.776291564, 'Jul - Sep, 2016': 76.2785312, 'Oct - Dec, 2016': 10.87108867, 'Jan - Mar, 2017': 83.5908071, 'Apr - Jun, 2017': 7.10414597, 'Jul - Sep, 2017': 84.34111572, 'Oct - Dec, 2017': 13.85764114, 'Jan - Mar, 2018': 85.30922692, 'Apr - Jun, 2018': 1.920760356, 'Jul - Sep, 2018': 82.45710035, 'Oct - Dec, 2018': 22.45202291, 'Jan - Mar, 2019': 82.64444708, 'Apr - Jun, 2019': 14.33368637, 'Jul - Sep, 2019': 82.5487654, 'Oct - Dec, 2019': 21.06888034, 'Jan - Mar, 2020': 79.22765292, 'Apr - Jun, 2020': 18.95864027, 'Jul - Sep, 2020': 81.80179392, 'Oct - Dec, 2020': 17.99351133, 'Jan - Mar, 2021': 79.88252073, 'Apr - Jun, 2021': 16.0173353, 'Jul - Sep, 2021': 70.65118424, 'Oct - Dec, 2021': 10.79948874, 'Jan - Mar, 2022': 65.68801486, 'Apr - Jun, 2022': 0.240895003, 'Jul - Sep, 2022': 46.7637208, 'Oct - Dec, 2022': 6.835292351, 'Jan - Mar, 2023': 59.03144565, 'Apr - Jun, 2023': 3.529941064, 'Jul - Sep, 2023': 35.56646462, 'Oct - Dec, 2023': 0.592339411, 'Jan - Mar, 2024': 69.489864, 'Apr - Jun, 2024': 1.161664364, 'Jul - Sep, 2024': 44.72020758, 'Oct - Dec, 2024': null},
  'Mandi Bahauldin': {'Jan - Mar, 2016': 76.79941414, 'Apr - Jun, 2016': 12.22160921, 'Jul - Sep, 2016': 77.36774074, 'Oct - Dec, 2016': 29.83857294, 'Jan - Mar, 2017': 75.93312727, 'Apr - Jun, 2017': 12.79783597, 'Jul - Sep, 2017': 77.12835753, 'Oct - Dec, 2017': 26.45268193, 'Jan - Mar, 2018': 79.23522627, 'Apr - Jun, 2018': 10.97600922, 'Jul - Sep, 2018': 80.36874828, 'Oct - Dec, 2018': 27.25233628, 'Jan - Mar, 2019': 83.1611944, 'Apr - Jun, 2019': 24.79626738, 'Jul - Sep, 2019': 83.54781019, 'Oct - Dec, 2019': 35.70590407, 'Jan - Mar, 2020': 81.61437883, 'Apr - Jun, 2020': 32.52085807, 'Jul - Sep, 2020': 83.37049207, 'Oct - Dec, 2020': 32.28962194, 'Jan - Mar, 2021': 81.45173722, 'Apr - Jun, 2021': 20.91272622, 'Jul - Sep, 2021': 81.53089297, 'Oct - Dec, 2021': 23.41258301, 'Jan - Mar, 2022': 63.43562975, 'Apr - Jun, 2022': 0.71169525, 'Jul - Sep, 2022': 49.42253464, 'Oct - Dec, 2022': 12.69270753, 'Jan - Mar, 2023': 64.92232444, 'Apr - Jun, 2023': 6.876045562, 'Jul - Sep, 2023': 33.97782832, 'Oct - Dec, 2023': 8.947838131, 'Jan - Mar, 2024': 61.29169379, 'Apr - Jun, 2024': 1.709934769, 'Jul - Sep, 2024': 48.16591587, 'Oct - Dec, 2024': null},
  'Okara': {'Jan - Mar, 2016': 66.98456146, 'Apr - Jun, 2016': 20.64779992, 'Jul - Sep, 2016': 76.3092688, 'Oct - Dec, 2016': 26.23548755, 'Jan - Mar, 2017': 66.67491912, 'Apr - Jun, 2017': 23.51889303, 'Jul - Sep, 2017': 71.11961779, 'Oct - Dec, 2017': 33.56457708, 'Jan - Mar, 2018': 67.82428301, 'Apr - Jun, 2018': 18.46520131, 'Jul - Sep, 2018': 69.80696208, 'Oct - Dec, 2018': 40.12946187, 'Jan - Mar, 2019': 62.44079609, 'Apr - Jun, 2019': 38.53167384, 'Jul - Sep, 2019': 73.86132658, 'Oct - Dec, 2019': 38.33418287, 'Jan - Mar, 2020': 68.14450347, 'Apr - Jun, 2020': 44.09970945, 'Jul - Sep, 2020': 80.81693778, 'Oct - Dec, 2020': 29.17218475, 'Jan - Mar, 2021': 66.71771519, 'Apr - Jun, 2021': 32.61889239, 'Jul - Sep, 2021': 73.33401362, 'Oct - Dec, 2021': 27.09820429, 'Jan - Mar, 2022': 46.43508245, 'Apr - Jun, 2022': 0.735520222, 'Jul - Sep, 2022': 50.59146308, 'Oct - Dec, 2022': 23.08181915, 'Jan - Mar, 2023': 43.11283695, 'Apr - Jun, 2023': 17.48724122, 'Jul - Sep, 2023': 38.85166167, 'Oct - Dec, 2023': 7.580411555, 'Jan - Mar, 2024': 51.35040592, 'Apr - Jun, 2024': 13.15349141, 'Jul - Sep, 2024': 46.86049699, 'Oct - Dec, 2024': null}, 
  'Pakpattan': {'Jan - Mar, 2016': 77.19133696, 'Apr - Jun, 2016': 22.97716472, 'Jul - Sep, 2016': 78.54735292, 'Oct - Dec, 2016': 17.12991159, 'Jan - Mar, 2017': 78.11679974, 'Apr - Jun, 2017': 21.87437556, 'Jul - Sep, 2017': 74.83806688, 'Oct - Dec, 2017': 18.96676508, 'Jan - Mar, 2018': 77.11812991, 'Apr - Jun, 2018': 11.48198431, 'Jul - Sep, 2018': 76.3773458, 'Oct - Dec, 2018': 28.89736737, 'Jan - Mar, 2019': 67.05754923, 'Apr - Jun, 2019': 38.96476124, 'Jul - Sep, 2019': 79.21411341, 'Oct - Dec, 2019': 35.05310495, 'Jan - Mar, 2020': 70.06579283, 'Apr - Jun, 2020': 43.85836709, 'Jul - Sep, 2020': 82.0067162, 'Oct - Dec, 2020': 14.1430972, 'Jan - Mar, 2021': 74.40397846, 'Apr - Jun, 2021': 34.50805409, 'Jul - Sep, 2021': 67.99823438, 'Oct - Dec, 2021': 18.36431471, 'Jan - Mar, 2022': 48.52307938, 'Apr - Jun, 2022': 0.563237989, 'Jul - Sep, 2022': 50.38033918, 'Oct - Dec, 2022': 16.06468813, 'Jan - Mar, 2023': 48.17577382, 'Apr - Jun, 2023': 13.42290003, 'Jul - Sep, 2023': 31.84357457, 'Oct - Dec, 2023': 1.85815386, 'Jan - Mar, 2024': 57.31540145, 'Apr - Jun, 2024': 10.07109224, 'Jul - Sep, 2024': 43.53442759, 'Oct - Dec, 2024': null}, 
  'Rahim Yar Khan': {'Jan - Mar, 2016': 33.00853184, 'Apr - Jun, 2016': 13.97726857, 'Jul - Sep, 2016': 44.97194443, 'Oct - Dec, 2016': 23.94506459, 'Jan - Mar, 2017': 32.71212755, 'Apr - Jun, 2017': 15.28226086, 'Jul - Sep, 2017': 43.91793179, 'Oct - Dec, 2017': 23.64480242, 'Jan - Mar, 2018': 30.56034336, 'Apr - Jun, 2018': 6.79683169, 'Jul - Sep, 2018': 39.92731785, 'Oct - Dec, 2018': 18.36175593, 'Jan - Mar, 2019': 34.58886563, 'Apr - Jun, 2019': 15.55163217, 'Jul - Sep, 2019': 44.62984351, 'Oct - Dec, 2019': 23.28194284, 'Jan - Mar, 2020': 35.96605509, 'Apr - Jun, 2020': 19.29390233, 'Jul - Sep, 2020': 44.99889635, 'Oct - Dec, 2020': 18.35624456, 'Jan - Mar, 2021': 34.62220567, 'Apr - Jun, 2021': 18.33925949, 'Jul - Sep, 2021': 42.70574609, 'Oct - Dec, 2021': 16.6463688, 'Jan - Mar, 2022': 21.12051512, 'Apr - Jun, 2022': 1.011730934, 'Jul - Sep, 2022': 34.19154785, 'Oct - Dec, 2022': 6.187338498, 'Jan - Mar, 2023': 15.60832696, 'Apr - Jun, 2023': 7.790916675, 'Jul - Sep, 2023': 31.98578951, 'Oct - Dec, 2023': 0.261078137, 'Jan - Mar, 2024': 26.63604415, 'Apr - Jun, 2024': 3.049236446, 'Jul - Sep, 2024': 36.06199035, 'Oct - Dec, 2024': null}, 
  'Rajanpur': {'Jan - Mar, 2016': 22.22387306, 'Apr - Jun, 2016': 1.910169994, 'Jul - Sep, 2016': 20.56829448, 'Oct - Dec, 2016': 4.189299237, 'Jan - Mar, 2017': 23.87403384, 'Apr - Jun, 2017': 3.086864743, 'Jul - Sep, 2017': 20.17051042, 'Oct - Dec, 2017': 5.939083111, 'Jan - Mar, 2018': 23.61130258, 'Apr - Jun, 2018': 1.303552797, 'Jul - Sep, 2018': 18.87127988, 'Oct - Dec, 2018': 4.89345223, 'Jan - Mar, 2019': 24.79607373, 'Apr - Jun, 2019': 3.490659701, 'Jul - Sep, 2019': 21.85830942, 'Oct - Dec, 2019': 7.59309183, 'Jan - Mar, 2020': 24.95400131, 'Apr - Jun, 2020': 5.690198256, 'Jul - Sep, 2020': 20.98956805, 'Oct - Dec, 2020': 7.857401285, 'Jan - Mar, 2021': 24.85420861, 'Apr - Jun, 2021': 5.100199717, 'Jul - Sep, 2021': 16.87045272, 'Oct - Dec, 2021': 7.356496786, 'Jan - Mar, 2022': 15.00328598, 'Apr - Jun, 2022': 0.121345098, 'Jul - Sep, 2022': 7.580015292, 'Oct - Dec, 2022': 2.586248617, 'Jan - Mar, 2023': 15.81602224, 'Apr - Jun, 2023': 2.101368382, 'Jul - Sep, 2023': 7.925215882, 'Oct - Dec, 2023': 1.254438606, 'Jan - Mar, 2024': 20.36295716, 'Apr - Jun, 2024': 0.76922084, 'Jul - Sep, 2024': 10.34806038, 'Oct - Dec, 2024': null}, 
  'Rawalpindi': {'Jan - Mar, 2016': 47.54814251, 'Apr - Jun, 2016': 23.32115358, 'Jul - Sep, 2016': 65.27437858, 'Oct - Dec, 2016': 14.76293821, 'Jan - Mar, 2017': 38.15538637, 'Apr - Jun, 2017': 22.68107822, 'Jul - Sep, 2017': 70.96331434, 'Oct - Dec, 2017': 13.54692833, 'Jan - Mar, 2018': 54.41913113, 'Apr - Jun, 2018': 26.51219217, 'Jul - Sep, 2018': 67.9626653, 'Oct - Dec, 2018': 36.33081973, 'Jan - Mar, 2019': 53.23559106, 'Apr - Jun, 2019': 33.76408274, 'Jul - Sep, 2019': 67.54352667, 'Oct - Dec, 2019': 58.43005124, 'Jan - Mar, 2020': 52.6285817, 'Apr - Jun, 2020': 52.59027532, 'Jul - Sep, 2020': 73.08750964, 'Oct - Dec, 2020': 32.45009333, 'Jan - Mar, 2021': 48.76443172, 'Apr - Jun, 2021': 24.93674183, 'Jul - Sep, 2021': 60.53850222, 'Oct - Dec, 2021': 30.10669963, 'Jan - Mar, 2022': 21.29969121, 'Apr - Jun, 2022': 2.238964669, 'Jul - Sep, 2022': 34.68800459, 'Oct - Dec, 2022': 9.03932479, 'Jan - Mar, 2023': 19.81035025, 'Apr - Jun, 2023': 9.327860697, 'Jul - Sep, 2023': 31.13910017, 'Oct - Dec, 2023': 7.422701337, 'Jan - Mar, 2024': 15.7318966, 'Apr - Jun, 2024': 7.053849288, 'Jul - Sep, 2024': 44.12513058, 'Oct - Dec, 2024': null},
  'Mianwali': {'Jan - Mar, 2016': 38.76329998, 'Apr - Jun, 2016': 3.738484984, 'Jul - Sep, 2016': 36.43826589, 'Oct - Dec, 2016': 5.844294604, 'Jan - Mar, 2017': 38.70611487, 'Apr - Jun, 2017': 2.348176694, 'Jul - Sep, 2017': 41.89894734, 'Oct - Dec, 2017': 9.641574439, 'Jan - Mar, 2018': 39.72500905, 'Apr - Jun, 2018': 1.830925446, 'Jul - Sep, 2018': 22.80284435, 'Oct - Dec, 2018': 10.4915695, 'Jan - Mar, 2019': 46.32325211, 'Apr - Jun, 2019': 6.075631031, 'Jul - Sep, 2019': 29.39317129, 'Oct - Dec, 2019': 17.32260699, 'Jan - Mar, 2020': 44.19859591, 'Apr - Jun, 2020': 7.781222039, 'Jul - Sep, 2020': 39.56929844, 'Oct - Dec, 2020': 16.99785943, 'Jan - Mar, 2021': 40.58583138, 'Apr - Jun, 2021': 4.284083698, 'Jul - Sep, 2021': 33.20187029, 'Oct - Dec, 2021': 8.293280942, 'Jan - Mar, 2022': 33.87368064, 'Apr - Jun, 2022': 0.184135454, 'Jul - Sep, 2022': 7.963716436, 'Oct - Dec, 2022': 3.143938503, 'Jan - Mar, 2023': 34.66941481, 'Apr - Jun, 2023': 0.714789379, 'Jul - Sep, 2023': 6.238081888, 'Oct - Dec, 2023': 1.182764936, 'Jan - Mar, 2024': 34.7831389, 'Apr - Jun, 2024': 0.607996218, 'Jul - Sep, 2024': 12.45220311, 'Oct - Dec, 2024': null},
  'Multan': {'Jan - Mar, 2016': 75.26321725, 'Apr - Jun, 2016': 14.15100437, 'Jul - Sep, 2016': 63.64398546, 'Oct - Dec, 2016': 13.56730549, 'Jan - Mar, 2017': 74.31241236, 'Apr - Jun, 2017': 16.32560156, 'Jul - Sep, 2017': 68.67053173, 'Oct - Dec, 2017': 23.3694385, 'Jan - Mar, 2018': 75.53833108, 'Apr - Jun, 2018': 8.500578266, 'Jul - Sep, 2018': 61.73385817, 'Oct - Dec, 2018': 20.30601576, 'Jan - Mar, 2019': 75.00634431, 'Apr - Jun, 2019': 21.85214813, 'Jul - Sep, 2019': 68.10803985, 'Oct - Dec, 2019': 30.71222019, 'Jan - Mar, 2020': 73.79784853, 'Apr - Jun, 2020': 25.5257862, 'Jul - Sep, 2020': 67.53855238, 'Oct - Dec, 2020': 22.50164489, 'Jan - Mar, 2021': 72.53693062, 'Apr - Jun, 2021': 22.28264276, 'Jul - Sep, 2021': 60.69972693, 'Oct - Dec, 2021': 6.209184174, 'Jan - Mar, 2022': 53.12142898, 'Apr - Jun, 2022': 0.450104185, 'Jul - Sep, 2022': 33.51081233, 'Oct - Dec, 2022': 5.039351833, 'Jan - Mar, 2023': 52.56637185, 'Apr - Jun, 2023': 6.636290714, 'Jul - Sep, 2023': 23.16300721, 'Oct - Dec, 2023': 0.171335758, 'Jan - Mar, 2024': 58.49555283, 'Apr - Jun, 2024': 3.178959978, 'Jul - Sep, 2024': 36.43031625, 'Oct - Dec, 2024': null},
  'Muzaffargarh': {'Jan - Mar, 2016': 53.12439361, 'Apr - Jun, 2016': 10.08944441, 'Jul - Sep, 2016': 50.73376247, 'Oct - Dec, 2016': 14.16882347, 'Jan - Mar, 2017': 56.60795678, 'Apr - Jun, 2017': 10.68882695, 'Jul - Sep, 2017': 51.00698765, 'Oct - Dec, 2017': 24.66570846, 'Jan - Mar, 2018': 55.96136958, 'Apr - Jun, 2018': 4.702376307, 'Jul - Sep, 2018': 41.80711356, 'Oct - Dec, 2018': 13.79431037, 'Jan - Mar, 2019': 59.41538088, 'Apr - Jun, 2019': 15.79265408, 'Jul - Sep, 2019': 50.8340174, 'Oct - Dec, 2019': 27.69646222, 'Jan - Mar, 2020': 60.39192824, 'Apr - Jun, 2020': 21.09777982, 'Jul - Sep, 2020': 49.30775251, 'Oct - Dec, 2020': 21.25629366, 'Jan - Mar, 2021': 57.24695749, 'Apr - Jun, 2021': 17.3361412, 'Jul - Sep, 2021': 45.94092966, 'Oct - Dec, 2021': 11.4372531, 'Jan - Mar, 2022': 37.32106514, 'Apr - Jun, 2022': 0.771066098, 'Jul - Sep, 2022': 25.75577493, 'Oct - Dec, 2022': 3.142843335, 'Jan - Mar, 2023': 39.50492356, 'Apr - Jun, 2023': 3.257640979, 'Jul - Sep, 2023': 20.62316372, 'Oct - Dec, 2023': 0.183494846, 'Jan - Mar, 2024': 48.01346134, 'Apr - Jun, 2024': 2.829263227, 'Jul - Sep, 2024': 25.04228776, 'Oct - Dec, 2024': null},
  'Nankana': {'Jan - Mar, 2016': 76.2081552, 'Apr - Jun, 2016': 5.575809141, 'Jul - Sep, 2016': 75.14751314, 'Oct - Dec, 2016': 14.4093984, 'Jan - Mar, 2017': 82.13570357, 'Apr - Jun, 2017': 7.425045143, 'Jul - Sep, 2017': 73.68048325, 'Oct - Dec, 2017': 17.24942111, 'Jan - Mar, 2018': 82.92225336, 'Apr - Jun, 2018': 3.450508628, 'Jul - Sep, 2018': 73.2155538, 'Oct - Dec, 2018': 18.24279711, 'Jan - Mar, 2019': 85.49997633, 'Apr - Jun, 2019': 12.61683622, 'Jul - Sep, 2019': 76.45016371, 'Oct - Dec, 2019': 22.55971639, 'Jan - Mar, 2020': 86.00627263, 'Apr - Jun, 2020': 16.25116982, 'Jul - Sep, 2020': 83.41228754, 'Oct - Dec, 2020': 16.71662585, 'Jan - Mar, 2021': 85.16762642, 'Apr - Jun, 2021': 10.16361095, 'Jul - Sep, 2021': 78.76245158, 'Oct - Dec, 2021': 13.54432362, 'Jan - Mar, 2022': 73.01437017, 'Apr - Jun, 2022': 0.090062699, 'Jul - Sep, 2022': 55.16385336, 'Oct - Dec, 2022': 7.703281795, 'Jan - Mar, 2023': 72.65687027, 'Apr - Jun, 2023': 1.906074372, 'Jul - Sep, 2023': 53.18794357, 'Oct - Dec, 2023': 0.820609165, 'Jan - Mar, 2024': 76.45770503, 'Apr - Jun, 2024': 0.484417322, 'Jul - Sep, 2024': 62.9067077, 'Oct - Dec, 2024': null},
  'Narowal': {'Jan - Mar, 2016': 79.97433962, 'Apr - Jun, 2016': 2.241797818, 'Jul - Sep, 2016': 85.86693324, 'Oct - Dec, 2016': 5.515815454, 'Jan - Mar, 2017': 86.2180763, 'Apr - Jun, 2017': 4.311132399, 'Jul - Sep, 2017': 84.18022001, 'Oct - Dec, 2017': 7.831771743, 'Jan - Mar, 2018': 89.20269889, 'Apr - Jun, 2018': 2.098396231, 'Jul - Sep, 2018': 89.17887769, 'Oct - Dec, 2018': 12.44314474, 'Jan - Mar, 2019': 89.53373778, 'Apr - Jun, 2019': 5.822955778, 'Jul - Sep, 2019': 84.30230928, 'Oct - Dec, 2019': 38.5108481, 'Jan - Mar, 2020': 85.57274305, 'Apr - Jun, 2020': 19.08689859, 'Jul - Sep, 2020': 84.14222, 'Oct - Dec, 2020': 8.945699065, 'Jan - Mar, 2021': 89.18565289, 'Apr - Jun, 2021': 7.162084228, 'Jul - Sep, 2021': 82.99692615, 'Oct - Dec, 2021': 9.927044722, 'Jan - Mar, 2022': 67.50289189, 'Apr - Jun, 2022': 0.020948985, 'Jul - Sep, 2022': 45.2238931, 'Oct - Dec, 2022': 4.045244706, 'Jan - Mar, 2023': 69.44154059, 'Apr - Jun, 2023': 1.395490282, 'Jul - Sep, 2023': 70.16365403, 'Oct - Dec, 2023': 2.497604324, 'Jan - Mar, 2024': 65.37247071, 'Apr - Jun, 2024': 0.328941344, 'Jul - Sep, 2024': 65.41046177, 'Oct - Dec, 2024': null},
  'Sahiwal': {'Jan - Mar, 2016': 77.00482205, 'Apr - Jun, 2016': 25.65921881, 'Jul - Sep, 2016': 70.02080251, 'Oct - Dec, 2016': 24.07673315, 'Jan - Mar, 2017': 73.42662467, 'Apr - Jun, 2017': 20.42399616, 'Jul - Sep, 2017': 61.44314323, 'Oct - Dec, 2017': 23.02251392, 'Jan - Mar, 2018': 72.77003142, 'Apr - Jun, 2018': 10.43662101, 'Jul - Sep, 2018': 64.0937991, 'Oct - Dec, 2018': 31.95587092, 'Jan - Mar, 2019': 69.91354863, 'Apr - Jun, 2019': 32.58088139, 'Jul - Sep, 2019': 70.69975922, 'Oct - Dec, 2019': 36.83227124, 'Jan - Mar, 2020': 71.86326024, 'Apr - Jun, 2020': 38.63132023, 'Jul - Sep, 2020': 73.62267056, 'Oct - Dec, 2020': 20.5787619, 'Jan - Mar, 2021': 71.31369387, 'Apr - Jun, 2021': 26.59911902, 'Jul - Sep, 2021': 57.66658835, 'Oct - Dec, 2021': 15.94626443, 'Jan - Mar, 2022': 50.20230262, 'Apr - Jun, 2022': 0.768890412, 'Jul - Sep, 2022': 31.71705838, 'Oct - Dec, 2022': 17.79683909, 'Jan - Mar, 2023': 48.07083903, 'Apr - Jun, 2023': 12.17155111, 'Jul - Sep, 2023': 23.00332908, 'Oct - Dec, 2023': 0.434956248, 'Jan - Mar, 2024': 55.83036364, 'Apr - Jun, 2024': 6.397925621, 'Jul - Sep, 2024': 34.64117364, 'Oct - Dec, 2024': null},
  'Sargodha': {'Jan - Mar, 2016': 70.10085714, 'Apr - Jun, 2016': 12.34282125, 'Jul - Sep, 2016': 54.37646147, 'Oct - Dec, 2016': 33.19067211, 'Jan - Mar, 2017': 69.85212678, 'Apr - Jun, 2017': 15.8158127, 'Jul - Sep, 2017': 57.2868479, 'Oct - Dec, 2017': 39.31860537, 'Jan - Mar, 2018': 72.62873823, 'Apr - Jun, 2018': 11.65834369, 'Jul - Sep, 2018': 44.12140185, 'Oct - Dec, 2018': 41.38272551, 'Jan - Mar, 2019': 75.80811562, 'Apr - Jun, 2019': 27.69554153, 'Jul - Sep, 2019': 49.55921343, 'Oct - Dec, 2019': 49.0558227, 'Jan - Mar, 2020': 76.11257958, 'Apr - Jun, 2020': 34.4228602, 'Jul - Sep, 2020': 64.73210364, 'Oct - Dec, 2020': 42.89187089, 'Jan - Mar, 2021': 72.19572543, 'Apr - Jun, 2021': 22.24753952, 'Jul - Sep, 2021': 57.70867865, 'Oct - Dec, 2021': 33.14264486, 'Jan - Mar, 2022': 51.50170743, 'Apr - Jun, 2022': 0.898537597, 'Jul - Sep, 2022': 24.02957492, 'Oct - Dec, 2022': 19.79355345, 'Jan - Mar, 2023': 52.11104315, 'Apr - Jun, 2023': 5.443479695, 'Jul - Sep, 2023': 17.9203434, 'Oct - Dec, 2023': 11.70807184, 'Jan - Mar, 2024': 51.16587038, 'Apr - Jun, 2024': 2.509601584, 'Jul - Sep, 2024': 25.68292079, 'Oct - Dec, 2024': null},
  'Sheikhupura': {'Jan - Mar, 2016': 79.78848168, 'Apr - Jun, 2016': 4.051012, 'Jul - Sep, 2016': 80.79660923, 'Oct - Dec, 2016': 10.70664795, 'Jan - Mar, 2017': 83.66165914, 'Apr - Jun, 2017': 7.344974898, 'Jul - Sep, 2017': 80.37747072, 'Oct - Dec, 2017': 15.52047564, 'Jan - Mar, 2018': 81.86035057, 'Apr - Jun, 2018': 4.415279924, 'Jul - Sep, 2018': 77.49982348, 'Oct - Dec, 2018': 19.13423745, 'Jan - Mar, 2019': 83.80677255, 'Apr - Jun, 2019': 12.52584776, 'Jul - Sep, 2019': 80.6648145, 'Oct - Dec, 2019': 24.1833104, 'Jan - Mar, 2020': 83.33408544, 'Apr - Jun, 2020': 18.70258141, 'Jul - Sep, 2020': 83.96263796, 'Oct - Dec, 2020': 15.73395783, 'Jan - Mar, 2021': 81.62053194, 'Apr - Jun, 2021': 9.155511906, 'Jul - Sep, 2021': 81.28593647, 'Oct - Dec, 2021': 10.76542114, 'Jan - Mar, 2022': 70.21061291, 'Apr - Jun, 2022': 0.042021898, 'Jul - Sep, 2022': 54.48388885, 'Oct - Dec, 2022': 6.318147405, 'Jan - Mar, 2023': 71.40042736, 'Apr - Jun, 2023': 1.587264272, 'Jul - Sep, 2023': 61.30430625, 'Oct - Dec, 2023': 1.320284196, 'Jan - Mar, 2024': 70.12868387, 'Apr - Jun, 2024': 0.462302846, 'Jul - Sep, 2024': 60.75919064, 'Oct - Dec, 2024': null},
  'Sialkot': {'Jan - Mar, 2016': 79.55028614, 'Apr - Jun, 2016': 6.114903798, 'Jul - Sep, 2016': 83.55264813, 'Oct - Dec, 2016': 12.88245214, 'Jan - Mar, 2017': 86.60152893, 'Apr - Jun, 2017': 9.490774724, 'Jul - Sep, 2017': 79.75289067, 'Oct - Dec, 2017': 14.61688677, 'Jan - Mar, 2018': 85.73191641, 'Apr - Jun, 2018': 5.824608669, 'Jul - Sep, 2018': 87.18532849, 'Oct - Dec, 2018': 20.40286207, 'Jan - Mar, 2019': 87.69659858, 'Apr - Jun, 2019': 12.39041467, 'Jul - Sep, 2019': 85.20895937, 'Oct - Dec, 2019': 40.32967903, 'Jan - Mar, 2020': 79.15409473, 'Apr - Jun, 2020': 27.3775755, 'Jul - Sep, 2020': 85.49571221, 'Oct - Dec, 2020': 16.12320817, 'Jan - Mar, 2021': 85.18873256, 'Apr - Jun, 2021': 11.77043761, 'Jul - Sep, 2021': 83.95244538, 'Oct - Dec, 2021': 12.89413351, 'Jan - Mar, 2022': 67.39762315, 'Apr - Jun, 2022': 0.280552004, 'Jul - Sep, 2022': 54.11048149, 'Oct - Dec, 2022': 7.989277737, 'Jan - Mar, 2023': 69.27989123, 'Apr - Jun, 2023': 5.469739112, 'Jul - Sep, 2023': 66.07483385, 'Oct - Dec, 2023': 4.251497628, 'Jan - Mar, 2024': 60.30224456, 'Apr - Jun, 2024': 1.023720228, 'Jul - Sep, 2024': 65.05205018, 'Oct - Dec, 2024': null},
  'Toba Tek Singh': {'Jan - Mar, 2016': 75.55030998, 'Apr - Jun, 2016': 16.4617852, 'Jul - Sep, 2016': 64.82744693, 'Oct - Dec, 2016': 22.03697154, 'Jan - Mar, 2017': 68.83611617, 'Apr - Jun, 2017': 13.21681825, 'Jul - Sep, 2017': 59.92828304, 'Oct - Dec, 2017': 25.21832438, 'Jan - Mar, 2018': 73.81571476, 'Apr - Jun, 2018': 6.825974953, 'Jul - Sep, 2018': 57.60114887, 'Oct - Dec, 2018': 32.64461041, 'Jan - Mar, 2019': 73.17193167, 'Apr - Jun, 2019': 21.57700738, 'Jul - Sep, 2019': 63.33745191, 'Oct - Dec, 2019': 38.19993923, 'Jan - Mar, 2020': 76.19992715, 'Apr - Jun, 2020': 27.56530803, 'Jul - Sep, 2020': 69.05709779, 'Oct - Dec, 2020': 26.07442236, 'Jan - Mar, 2021': 73.40536464, 'Apr - Jun, 2021': 20.85636675, 'Jul - Sep, 2021': 60.36854285, 'Oct - Dec, 2021': 24.05490839, 'Jan - Mar, 2022': 51.34995439, 'Apr - Jun, 2022': 0.429413286, 'Jul - Sep, 2022': 31.92937492, 'Oct - Dec, 2022': 15.50867657, 'Jan - Mar, 2023': 50.11636514, 'Apr - Jun, 2023': 4.723259814, 'Jul - Sep, 2023': 28.39290636, 'Oct - Dec, 2023': 0.103213815, 'Jan - Mar, 2024': 56.78977812, 'Apr - Jun, 2024': 2.371051099, 'Jul - Sep, 2024': 37.80597858, 'Oct - Dec, 2024': null},  
  'Vehari': {'Jan - Mar, 2016': 76.84650519, 'Apr - Jun, 2016': 17.09158455, 'Jul - Sep, 2016': 71.41721118, 'Oct - Dec, 2016': 18.48748695, 'Jan - Mar, 2017': 78.28025264, 'Apr - Jun, 2017': 15.30728325, 'Jul - Sep, 2017': 79.03767955, 'Oct - Dec, 2017': 21.58310186, 'Jan - Mar, 2018': 80.64214318, 'Apr - Jun, 2018': 5.900209657, 'Jul - Sep, 2018': 75.59217181, 'Oct - Dec, 2018': 26.01488881, 'Jan - Mar, 2019': 72.08088128, 'Apr - Jun, 2019': 30.24597004, 'Jul - Sep, 2019': 75.60381955, 'Oct - Dec, 2019': 31.86170061, 'Jan - Mar, 2020': 69.07361614, 'Apr - Jun, 2020': 32.05699261, 'Jul - Sep, 2020': 76.34680004, 'Oct - Dec, 2020': 22.58353736, 'Jan - Mar, 2021': 70.90270898, 'Apr - Jun, 2021': 25.76887142, 'Jul - Sep, 2021': 61.80152586, 'Oct - Dec, 2021': 16.79227909, 'Jan - Mar, 2022': 48.96098863, 'Apr - Jun, 2022': 0.551845389, 'Jul - Sep, 2022': 37.4984904, 'Oct - Dec, 2022': 13.52465706, 'Jan - Mar, 2023': 45.5929866, 'Apr - Jun, 2023': 8.312993462, 'Jul - Sep, 2023': 23.6665681, 'Oct - Dec, 2023': 0.164995226, 'Jan - Mar, 2024': 56.70395183, 'Apr - Jun, 2024': 3.94370725, 'Jul - Sep, 2024': 31.12432643, 'Oct - Dec, 2024': null},
  'Punjab': {'Jan - Mar, 2016': 47.64609239, 'Apr - Jun, 2016': 7.755302352, 'Jul - Sep, 2016': 46.05268951, 'Oct - Dec, 2016': 12.69742004, 'Jan - Mar, 2017': 47.39796624, 'Apr - Jun, 2017': 8.259171091, 'Jul - Sep, 2017': 46.95305682, 'Oct - Dec, 2017': 15.46306473, 'Jan - Mar, 2018': 49.27103395, 'Apr - Jun, 2018': 5.164210504, 'Jul - Sep, 2018': 42.66949535, 'Oct - Dec, 2018': 17.59806983, 'Jan - Mar, 2019': 51.5839741, 'Apr - Jun, 2019': 13.71509385, 'Jul - Sep, 2019': 47.47792998, 'Oct - Dec, 2019': 24.1824389, 'Jan - Mar, 2020': 52.05833911, 'Apr - Jun, 2020': 18.65773705, 'Jul - Sep, 2020': 50.50942799, 'Oct - Dec, 2020': 17.19004267, 'Jan - Mar, 2021': 48.96999604, 'Apr - Jun, 2021': 12.0700672, 'Jul - Sep, 2021': 44.03848297, 'Oct - Dec, 2021': 13.21158828, 'Jan - Mar, 2022': 34.88032087, 'Apr - Jun, 2022': 0.396121961, 'Jul - Sep, 2022': 24.80068652, 'Oct - Dec, 2022': 7.170356687, 'Jan - Mar, 2023': 33.82830247, 'Apr - Jun, 2023': 3.914597474, 'Jul - Sep, 2023': 21.64814155, 'Oct - Dec, 2023': 1.886524832, 'Jan - Mar, 2024': 38.02339583, 'Apr - Jun, 2024': 2.091708773, 'Jul - Sep, 2024': 27.62903372, 'Oct - Dec, 2024': null}
  };

  plotGreeneryChart(data, district);
}

const handleHistoricalParamsChange = () => {
  // Get the values from the select inputs
  const district = $("#district-selector").val();
  // Call the function with the current values
  if (district) {
    getHistoricalData(district);
    // fetchAllHistoricalData(district);
  }
};

const handleForecastDistrictChange = () => {
  const district = $("#district-selector").val();
  if (district) {
    getForecastAqi(district);
  }
};

const handleSmogCausesDistrictChange = () => {
  const district = $("#predition-district-selector").val();
  if (district) {
    getPredictionData(district);
  }
};

const handleGreeneryDistrictChange = () => {
  const district = $("#greenery-district-selector").val();
  if (district) {
    getGreeneryData(district);
  }
};

const plotHistoricalGraph = (data) => {
  const dataFor7DaysBefore = data.forecast_7d.aqi;
  const dataFor14DaysBefore = data.forecast_14d.aqi;
  const dataFor2MonthsBefore = data.historical;
  const totalLength = dataFor2MonthsBefore.aqi.length;

  try {
    const datasets = [
      {
        label: "Actual",
        data: roundNullableData(dataFor2MonthsBefore.aqi),
        borderColor: "blue",
        fill: false,
      },
      {
        label: "14 days",
        data: roundNullableData(padList([...dataFor14DaysBefore], totalLength)),
        borderColor: "yellow",
        fill: false,
      },
      {
        label: "7 days",
        data: roundNullableData(padList([...dataFor7DaysBefore], totalLength)),
        borderColor: "green",
        fill: false,
      },
    ];

    if (leftChart) {
      leftChart.destroy();
    }

    // leftChart = new Chart(leftChartCtx, {
    //   type: "line",
    //   data: {
    //     labels: dataFor2MonthsBefore.date.map(convertDateFormat),
    //     datasets,
    //   },
    //   options: {
    //     responsive: true,
    //     scales: {
    //       y: {
    //         beginAtZero: false,
    //         min: 0,
    //         max: 500,
    //       },
    //     },
    //   },
    // });
  } catch (error) {
    console.log({ error });
  }
};

const plotPredictionGraph = (data) => {
  const { firstSection, secondSection, thirdSection } = divideArray(data.aqi);

  let groupedDatasets = [
    {
      label: "7 days",
      data: roundNullableData(firstSection),
      borderColor: "#06402b",
      fill: false,
    },
    {
      label: "Next 7 days",
      data: roundNullableData(secondSection),
      backgroundColor: "transparent",
      borderColor: "#008000",
      fill: false,
    },
    {
      label: "Next 45 days",
      data: roundNullableData(thirdSection),
      backgroundColor: "transparent",
      borderColor: "#90EE90",
      fill: false,
    },
  ];

  // if (rightChart) {
  //   rightChart.destroy();
  // }

  // rightChart = new Chart(rightChartCtx, {
  //   type: "line",
  //   data: {
  //     labels: data.date.map(convertDateFormat),
  //     datasets: groupedDatasets,
  //   },
  //   options: {
  //     responsive: true,
  //     // plugins: {
  //     // title: {
  //     //   display: true,
  //     //   text: (ctx) => "Prediction Data",
  //     // },
  //     // legend: {
  //     //   display: false,
  //     // },
  //     // },
  //     scales: {
  //       y: {
  //         beginAtZero: false,
  //         min: 0,
  //         max: 500,
  //       },
  //       x: {
  //         beginAtZero: false,
  //       },
  //     },
  //   },
  // });
};

const plotSmogCausesChart = (data) => {
  const last_year_next_two_months = data["last_year_data"]["next_two_months"];
  const last_year_past_two_months = data["last_year_data"]["past_two_months"];

  const this_year_next_two_months = data["this_year_data"]["next_two_months"];
  const this_year_past_two_months = data["this_year_data"]["past_two_months"];

  // Get the current date and generate the range of dates from two months ago to two months in the future
  const currentDate = new Date();
  const startDate = new Date(currentDate);
  startDate.setMonth(currentDate.getMonth() - 2);

  // const endDate = new Date(currentDate);
  const endDate = new Date('14-Dec-2024');
  endDate.setMonth(currentDate.getMonth() + 2);

  const dateRange = [];
  for (let d = new Date(startDate); d <= endDate; d.setDate(d.getDate() + 1)) {
    dateRange.push(new Date(d)); // Add 4-day steps
  }

  // Map AQI data for last year
  const lastYearData = dateRange.map((date) => {
    const formattedDate = convertDateFormat(date, false);
    const pastIndex = last_year_past_two_months.date.findIndex(
      (d) => convertDateFormat(d, false) === formattedDate
    );
    const nextIndex = last_year_next_two_months.date.findIndex(
      (d) => convertDateFormat(d, false) === formattedDate
    );

    if (pastIndex !== -1) {
      return last_year_past_two_months.aqi[pastIndex];
    } else if (nextIndex !== -1) {
      return last_year_next_two_months.aqi[nextIndex];
    } else {
      return null; // No data for this date
    }
  });

  // Map AQI data for this year
  const thisYearData = dateRange.map((date) => {
    const formattedDate = convertDateFormat(date, false);
    const pastIndex = this_year_past_two_months.date.findIndex(
      (d) => convertDateFormat(d, false) === formattedDate
    );
    const nextIndex = this_year_next_two_months.date.findIndex(
      (d) => convertDateFormat(d, false) === formattedDate
    );

    if (pastIndex !== -1) {
      return this_year_past_two_months.aqi[pastIndex];
    } else if (nextIndex !== -1) {
      return this_year_next_two_months.aqi[nextIndex];
    } else {
      return null; // No data for this date
    }
  });

  const skipped = (ctx, value) => ctx.p0.skip || ctx.p1.skip ? value : undefined;
  const down = (ctx, value) => ctx.p0.parsed.y > ctx.p1.parsed.y ? value : undefined;

  // Datasets for plotting
  const datasets = [
    {
      label: "Previous Year",
      data: lastYearData,
      backgroundColor: "#808080", // Gray color for last year
      borderColor: "#808080", // Gray color for last year
      fill: false,
      // pointStyle: 'circle',
      pointStyle: false,
      tension: 0.1,
      // pointRadius: 0,
    },
    {
      label: "Current Year",
      data: thisYearData,
      segment: {
        borderColor: function(context) {
          const index = context.p0DataIndex;
          const label = context.chart.data.labels[index];
          if (!label) return '#000000'; // Default color if label is undefined
  
          const currentDate = new Date(`${label}-2024`); // Assuming 2024 as the year
          const today = new Date();
          const diffInDays = (currentDate - today) / (1000 * 60 * 60 * 24);
  
          // Color logic based on date difference
          if (diffInDays <= 7 && diffInDays > 0) {
            return '#8B0000'; // Next 7 days
          } else if (diffInDays <= 14 && diffInDays > 7) {
            return '#ff0000'; // Next 14 days
          } else if (diffInDays > 14) {
            return '#FF7F7F'; // Beyond 14 days
          } else {
            return '#000000'; // Default for past dates
          }
        }
      },
      // backgroundColor: "#000000", // Black color for current year
      // borderColor: "#000000", // Black color for current year
      // segment: {
      //   borderColor: ctx => skipped(ctx, 'rgb(0,0,0,0.2)') || down(ctx, 'rgb(192,75,75)'),
      //   borderDash: ctx => skipped(ctx, [6, 6]),
      // },
      fill: false,
      pointStyle: false,
      tension: 0.1,
      spanGaps: true,
    },
    {
      label: "Next 7 days",
      data: roundNullableData(
        padListWithNull(
          this_year_next_two_months.aqi.slice(0, 7),
          last_year_past_two_months.date.length +
            last_year_next_two_months.date.length +
            this_year_past_two_months.date.length
        )
      ),
      backgroundColor: "#8B0000", // Dark red for future 7 days
      borderColor: "#8B0000", // Dark red for future 7 days
      fill: false,
      // pointStyle: false,
      tension: 0.1
      // pointRadius: 0,
    },
    {
      label: "Next 14 days",
      data: roundNullableData(
        padListWithNull(
          this_year_next_two_months.aqi.slice(7, 14),
          last_year_past_two_months.date.length +
            last_year_next_two_months.date.length +
            this_year_past_two_months.date.length +
            7
        )
      ),
      backgroundColor: "#ff0000", // Red for next 7 days
      borderColor: "#ff0000", // Red for next 7 days
      fill: false,
      // pointStyle: false,
      tension: 0.1
      // pointRadius: 0,
    },
    {
      label: "After 14 days",
      data: roundNullableData(
        padListWithNull(
          this_year_next_two_months.aqi.slice(14),
          last_year_past_two_months.date.length +
            last_year_next_two_months.date.length +
            this_year_past_two_months.date.length +
            14
        )
      ),
      backgroundColor: "#FF7F7F", // Light red for next 45 days
      borderColor: "#FF7F7F", // Light red for next 45 days
      fill: false,
      // pointStyle: false,
      tension: 0.1
      // pointRadius: 0,
    },
  ];

  // Destroy the previous chart if it exists
  if (predictionChart) {
    predictionChart.destroy();
  }

  // Create the chart
  predictionChart = new Chart(predictionChartCtx, {
    type: "line",
    data: {
      labels: dateRange.map((date) => convertDateFormat(date, false)), // Use the generated dateRange for the x-axis
      datasets: datasets, // Aligned data for both years
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        y: {
          beginAtZero: false,
          min: 0,
          max: 800,
        },
        x: {
          type: "category", // Category scale to ensure the dates are displayed correctly
          title: {
            display: true,
            text: "Date",
          },
        },
      },
      interaction: {
        intersect: true,
        mode: 'index',
      },
    },
  });
};

const plotGreeneryChart = (data, district) => {
  // Destroy the previous chart if it exists
  if (greeneryChart) {
    greeneryChart.destroy();
  }
  
  const years = Object.keys(data[district]);
  const values = Object.values(data[district]);

  // Create the chart
  greeneryChart = new Chart(greeneryChartCtx, {
    type: 'line',
    data: {
      labels: years,
      datasets: [{
        label: 'Percentage Cover',
        data: values,
        backgroundColor: '#70AD46',  // Bar fill color
        borderColor: '#70AD46',        // Bar border color
        borderWidth: 1,                               // Border width
        pointStyle: false
      }]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true,  // Ensures the y-axis starts at 0
          title: {
            display: true,
            text: 'Percentage'  // Label for y-axis
          }
        },
        x: {
          title: {
            display: true,
            text: 'Year'  // Label for x-axis
          }
        }
      },
      responsive: true,
      plugins: {
        legend: {
          display: true,
          position: 'top', // Position of the legend
        },
        tooltip: {
          enabled: true,   // Enable tooltips on hover
        }
      }
    }
  });
  
}

/*
const plotSmogCausesChart = (data) => {
  const last_year_next_two_months = data["last_year_data"]["next_two_months"];
  const last_year_past_two_months = data["last_year_data"]["past_two_months"];

  const this_year_next_two_months = data["this_year_data"]["next_two_months"];
  const this_year_past_two_months = data["this_year_data"]["past_two_months"];

  // Generate labels with only day and month
  let labels = [
    ...last_year_past_two_months.date,
    ...last_year_next_two_months.date,
    ...this_year_past_two_months.date,
    ...this_year_next_two_months.date,
  ].map((dateStr) => convertDateFormat(dateStr, false));  // Keeping the same date format without year

  // Create datasets
  let datasets = [
    {
      label: "Last year",
      data: roundNullableData([
        ...last_year_past_two_months.aqi,
        ...last_year_next_two_months.aqi,
      ]),
      borderColor: "#808080",
      fill: false,
    },
    {
      label: "Current year last 2 months",
      data: roundNullableData(
        padListWithNull(
          this_year_past_two_months.aqi,
          last_year_past_two_months.date.length +
            last_year_next_two_months.date.length
        )
      ),
      borderColor: "#000000",
      fill: false,
    },
    {
      label: "Current year future 7 days",
      data: roundNullableData(
        padListWithNull(
          this_year_next_two_months.aqi.slice(0, 7),
          last_year_past_two_months.date.length +
            last_year_next_two_months.date.length +
            this_year_past_two_months.date.length
        )
      ),
      borderColor: "#8B0000",
      fill: false,
    },
    {
      label: "Current year next 7 days",
      data: roundNullableData(
        padListWithNull(
          this_year_next_two_months.aqi.slice(7, 14),
          last_year_past_two_months.date.length +
            last_year_next_two_months.date.length +
            this_year_past_two_months.date.length +
            7
        )
      ),
      borderColor: "#ff0000",
      fill: false,
    },
    {
      label: "Current year next 45 days",
      data: roundNullableData(
        padListWithNull(
          this_year_next_two_months.aqi.slice(14),
          last_year_past_two_months.date.length +
            last_year_next_two_months.date.length +
            this_year_past_two_months.date.length +
            14
        )
      ),
      borderColor: "#FF7F7F",
      fill: false,
    },
  ];

  // Destroy the previous chart if it exists
  if (predictionChart) {
    predictionChart.destroy();
  }

  // Create the new chart
  predictionChart = new Chart(predictionChartCtx, {
    type: "line",
    data: {
      labels,  // Use the day/month labels
      datasets,
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: false,
          min: 0,
          max: 500,
        },
        x: {
          type: 'category',  // Use category scale for x-axis
          labels: labels.map(label => {
            const [day, month] = label.split('-');  // Extract day and month only
            return `${day}-${month}`;  // Display only day and month
          }),
        },
      },
    },
  });
};
*/

/*
const plotSmogCausesChart = (data) => {
  const last_year_next_two_months = data["last_year_data"]["next_two_months"];
  const last_year_past_two_months = data["last_year_data"]["past_two_months"];

  const this_year_next_two_months = data["this_year_data"]["next_two_months"];
  const this_year_past_two_months = data["this_year_data"]["past_two_months"];

  let labels = [
    ...last_year_past_two_months.date,
    ...last_year_next_two_months.date,
    ...this_year_past_two_months.date,
    ...this_year_next_two_months.date,
  ].map((dateStr) => convertDateFormat(dateStr, false));

  let datasets = [
    {
      label: "Last year",
      data: roundNullableData([
        ...last_year_past_two_months.aqi,
        ...last_year_next_two_months.aqi,
      ]),
      borderColor: "#808080",
      fill: false,
    },
    {
      label: "Current year last 2 months",
      data: roundNullableData(
        padListWithNull(
          this_year_past_two_months.aqi,
          last_year_past_two_months.date.length +
            last_year_next_two_months.date.length
        )
      ),
      borderColor: "#000000",
      fill: false,
    },
    {
      label: "Current year future 7 days",
      data: roundNullableData(
        padListWithNull(
          this_year_next_two_months.aqi.slice(0, 7),
          last_year_past_two_months.date.length +
            last_year_next_two_months.date.length +
            this_year_past_two_months.date.length
        )
      ),
      borderColor: "#8B0000",
      fill: false,
    },
    {
      label: "Current year next 7 days",
      data: roundNullableData(
        padListWithNull(
          this_year_next_two_months.aqi.slice(7, 14),
          last_year_past_two_months.date.length +
            last_year_next_two_months.date.length +
            this_year_past_two_months.date.length +
            7
        )
      ),
      borderColor: "#ff0000",
      fill: false,
    },
    {
      label: "Current year next 45 days",
      data: roundNullableData(
        padListWithNull(
          this_year_next_two_months.aqi.slice(14),
          last_year_past_two_months.date.length +
            last_year_next_two_months.date.length +
            this_year_past_two_months.date.length +
            14
        )
      ),
      borderColor: "#FF7F7F",
      fill: false,
    },
  ];

  if (predictionChart) {
    predictionChart.destroy();
  }

  predictionChart = new Chart(predictionChartCtx, {
    type: "line",
    data: {
      labels,
      datasets,
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: false,
          min: 0,
          max: 500,
        },
        x: {
          beginAtZero: false,
        },
      },
    },
  });
};
*/
const convertDateFormat = (dateStr, shouldIncludeYear = true) => {
  const date = new Date(dateStr);

  const day = date.getDate();
  const year = shouldIncludeYear ? date.getFullYear().toString().slice(-2) : "";

  const monthNames = [
    "Jan",
    "Feb",
    "Mar",
    "Apr",
    "May",
    "June",
    "July",
    "Aug",
    "Sept",
    "Oct",
    "Nov",
    "Dec",
  ];
  const month = monthNames[date.getMonth()];

  return `${day}-${month}${year ? `-${year}` : ""}`;
};

const padList = (list, targetLength) => {
  if (list.length >= targetLength) {
    return list;
  }
  const padding = new Array(targetLength - list.length).fill(null);
  return [...padding, ...list];
};

const padListWithNull = (list, paddingLength) => {
  const padding = new Array(paddingLength).fill(null);
  return [...padding, ...list];
};

const roundNullableData = (data) => {
  return data.map((d) => {
    if (!d) return d;
    else return Math.round(d);
  });
};
